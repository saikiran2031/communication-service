"use strict";var s=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var l=Object.prototype.hasOwnProperty;var u=(i,o)=>{for(var e in o)s(i,e,{get:o[e],enumerable:!0})},p=(i,o,e,r)=>{if(o&&typeof o=="object"||typeof o=="function")for(let a of m(o))!l.call(i,a)&&a!==e&&s(i,a,{get:()=>o[a],enumerable:!(r=d(o,a))||r.enumerable});return i};var g=i=>p(s({},"__esModule",{value:!0}),i);var w={};u(w,{handler:()=>f});module.exports=g(w);var t=class{async sendWelcomeEmail(o,e,r){console.log(`[Braze MOCK] Sending Welcome Email to ${e} (${r})`),await new Promise(a=>setTimeout(a,100))}async sendPushNotification(o,e,r,a){console.log(`[Braze MOCK] Push to ${o}: ${e} - ${r}`,a),await new Promise(c=>setTimeout(c,100))}async sendPointsMilestone(o,e){console.log(`[Braze MOCK] Points Milestone for ${o}: ${e} pts`),await new Promise(r=>setTimeout(r,100))}async trackEvent(o,e,r){console.log(`[Braze MOCK] Track Event for ${o}: ${e}`,r),await new Promise(a=>setTimeout(a,100))}};var n=class{constructor(o){this.provider=o}async handleRequest(o){switch(console.log(`Processing action: ${o.action} for user: ${o.userId}`),o.action){case"WELCOME_EMAIL":await this.provider.sendWelcomeEmail(o.userId,o.data.email,o.data.userName);break;case"PUSH_NOTIFICATION":await this.provider.sendPushNotification(o.userId,o.data.title,o.data.message,o.data.extra);break;case"POINTS_MILESTONE":await this.provider.sendPointsMilestone(o.userId,o.data.pointsBalance);break;case"TRACK_EVENT":await this.provider.trackEvent(o.userId,o.data.eventName,o.data.properties);break;default:console.warn(`Unknown action: ${o.action}`)}}};var v=new t,P=new n(v),f=async i=>{try{console.log("Communication Service received:",JSON.stringify(i));let o=i.Records?JSON.parse(i.Records[0].Sns.Message):i;if(!o.action||!o.userId)throw new Error("Invalid payload: Missing action or userId");let e={action:o.action,userId:o.userId,data:o.data||{}};return await P.handleRequest(e),{statusCode:200,body:JSON.stringify({success:!0})}}catch(o){return console.error("Communication Service Error:",o),{statusCode:500,body:JSON.stringify({error:o.message})}}};0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
